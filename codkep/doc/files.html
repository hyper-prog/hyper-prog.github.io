<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Files</title>
  <meta http-equiv="Content-Type" content="Text/Html;Charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="docstyle.css"/>
  <link rel="stylesheet" type="text/css" href="default.css"/>
  <link rel="stylesheet" type="text/css" href="ckcomm.css"/>
  <link rel="stylesheet" type="text/css" href="flex.css"/>
  <script type="text/javascript" src="highlight.pack.js"></script>
</head>
<body>
 <div class="content"><div class="ccdoccontent"><a name="pos_1"><h1>Files</h1></a>
<p>In a CodKep based site you can store files managed and unmanaged way.
All kind of uploaded files should located under <code>/date</code> directory.
While unmanaged files does not have any additional info stored in the database,
the <strong>managed files have a database record</strong> generated by CodKep file module. The file module registers every managed
file, gives an unique identifier of each file, stores the mime type, the original upload filename,
the upload time and user and other useful data.
This document is describe the using of managed files in CodKep:
</p>
<p>All managed files has an UFI (<em>The <strong>U</strong>nique <strong>F</strong>ile <strong>I</strong>dentifier</em>) number which obviously identifies the file.
</p>
<p>Database sample with two files:
</p><pre><code class="code">mysql&gt; select * from file;
+-----+--------+-------------+-----+--------------+------------+----------+---------------------+
| ufi | type   | name        | sub | fsname       | mime       | uploader | uploaded            |
+-----+--------+-------------+-----+--------------+------------+----------+---------------------+
|   1 | public | monkey.jpg  |     | monkey_1.jpg | image/jpeg | admin    | 2017-02-05 13:49:24 |
|   2 | secure | meerkat.jpg |     | meerkat.jpg  | image/jpeg | admin    | 2017-02-05 13:49:24 |
+-----+--------+-------------+-----+--------------+------------+----------+---------------------+
2 rows in set (0.00 sec)
</code></pre><p><a name="filestoretype"></a>
</p><a name="pos_2"><h2>Storing type</h2></a>
<p>The managed files can stored in two available <em>type</em>:
</p>
<ul><li><code>public</code>
<ul><li>The file is uploaded/stored under <code>/data</code> directory and available through the web server with a simple url.</li><li>In case you ask an url of a <em>public</em> file, you will get a simple url which points to the desired file. The will <strong>served directly by the web server</strong>. (It means that <strong>anyone can read</strong> this file who knows the url)</li></ul></li><li><code>secure</code>
<ul><li>The file is uploaded/stored under <code>/data/secure</code> directory which is not available by the web server. (Should configured this way)</li><li>In case you ask an url of a <em>secure</em> file, you will get an url which points to a special file module callback which check the permissions and <strong>serve the file content if allowed</strong>. (It means that only one can read this file who has the appropriate permissions) Read the <a href="#fileaccess">file access section</a> for details.</li></ul></li></ul><p><a name="fileclass"></a>
</p><a name="pos_3"><h2>File class</h2></a>
<p>The File class of the CodKep can used to create File objects which represents a managed file in CodKep.
The File class can represents both <code>public</code> and <code>secure</code> typed files.
</p><pre><code class="php">function create_img_tag_from_ufi($image_ufi)
{
    $img = file_load($image_ufi,true);
    /* Equivalent to call:
     *  $img = new File('');
     *  $img-&gt;load($image_ufi,true);
     */

    if($img == NULL)
        return '&lt;img src="'.url('/site/no_image.jpg').'" /&gt;';
    return '&lt;img src="'.$img-&gt;url.'" /&gt;';
}
</code></pre><p><a name="fileproperties"></a>
</p><a name="pos_4"><h3>Fixed properties of the File object</h3></a>
<p>Every File object has same built-in properties which are available in any kind of file.
</p>
<p><strong>Built-in properties of file object:</strong>
<br>(The <code>$file</code> is only a sample object variable here))
</p>
<ul><li><span class="definition">url</span>  - (Use: <code>$file->url</code>)
<ul><li>The url of the file to put a link to the html code.</li></ul></li><li><span class="definition">path</span>  - (Use: <code>$file->path</code>)
<ul><li>The path in the filesystem, to reach the file from code.</li></ul></li><li><span class="definition">ufi</span>  - (Use: <code>$file->ufi</code>)
<ul><li>The ufi of the file.</li></ul></li><li><span class="definition">type</span>  - (Use: <code>$file->type</code>)
<ul><li>The store type of the file. (<code>public</code> or <code>secure</code>)</li></ul></li><li><span class="definition">subdir</span>  - (Use: <code>$file->subdir</code>)
<ul><li>The storing subdirectory of the file in the local filesystem.</li></ul></li><li><span class="definition">mime</span>  - (Use: <code>$file->mime</code>)
<ul><li>The mime type of the file.</li></ul></li><li><span class="definition">uploaded</span>  - (Use: <code>$file->uploaded</code>)
<ul><li>The upload time of the file.</li></ul></li><li><span class="definition">uploader</span>  - (Use: <code>$file->uploader</code>)
<ul><li>The uploader user of the file.</li></ul></li></ul><p><a name="filemethods"></a>
</p><a name="pos_5"><h3>Methods of File object</h3></a>

<ul><li><span class="definition">File($type)</span> - The constructor (<code>__construct</code>) of File
<ul><li>The <code>$type</code> parameter specifies the store type of the file. (<code>public</code> or <code>secure</code>)</li></ul></li><li><span class="definition">urlResized($sizeclass)</span>
<ul><li>The url of the file to put a link to the html code. In case this file is an image file with an available size class according to the <code>register_image_sizeclass</code> function and <code>HOOK_file_image_sizeclass</code> hook this url will automatically referenced a scaled version of the image. See the <a href="#sizeclasses">size class chapter</a> for details.</li><li>The function checks for the required permissions. (HOOK_file_access)</li></ul></li><li><span class="definition">addFromTemp($name, $from, $subdir = '', array $context = [])</span>
<ul><li>This function can create a new (managed) File object from an uploaded or a temporary file.
<ul><li>The parameter <code>$name</code> tells the original filename. This can differs from the filesystem filename. A secure typed file will be available through file url with this name. This parameter is the php <code>$_FILES[ITEM_NAME]["name"]</code> in case of simple form based upload.</li><li>The parameter <code>$from</code> is the temporary file name and path of the uploaded/temporary file. This parameter is the php <code>$_FILES[ITEM_NAME]["tmp_name"]</code> in case of simple form based upload.</li><li>The parameter <code>$subdir</code> is the desired subdirectory in the filesystem where the file will stored.</li><li>The <code>$context</code> parameter is an array can used for define the file upload/add context.
<ul><li>If the <code>$context</code> array has <code>'noupload' => true</code> value, the <code>addFromTemp</code> method will use a simple file moving instead of <code>move_uploaded_file()</code>. (You have to specify if the file is not received by standard php upload)</li></ul></li></ul></li><li>The function checks for the required permissions. (HOOK_file_access)</li></ul></li><li><span class="definition">load($ufi,$disable_show_error = false)</span>
<ul><li>Loads the file object according to the <code>$ufi</code> parameter.
<ul><li>If the <code>$disable_show_error</code> parameter is <code>true</code> the load() method won't do an automatic redirection to the error page when the ufi is not loadable.</li></ul></li></ul></li><li><span class="definition">load_from_array($file_data_array)</span>
<ul><li>Loads the file object from a previously read array which contains all columns from the file table. (See sql scheme editor) This function exists for that purpose to avoiding an unnecessary database read if the required data already loaded somewhere.</li></ul></li><li><span class="definition">remove()</span>
<ul><li>Removes the file object from the system, which means the removing both of the database record and the referenced file from the filesystem.</li><li>The function checks for the required permissions. (HOOK_file_access)</li></ul></li><li><span class="definition">getContent()</span>
<ul><li>Returns the content of the referenced file.</li><li>The function checks for the required permissions. (HOOK_file_access)</li></ul></li></ul><p><a name="filehelpers"></a>
</p><a name="pos_6"><h3>Helper functions of File class</h3></a>
<p><span class="definition">file_load($ufi,$disable_show_error = false)</span>
<br/>
Loads a file object by UFI.
This function is create an empty File object and call <code>load($ufi,$disable_show_error)</code> method on it.
</p>
<p><span class="definition">file_load_from_array($file_data_array)</span>
<br/>
Loads the file object from a previously read array which contains all columns from the file table.
This function is create an empty File object and call <code>load_from_array($file_data_array)</code> method on it.
</p>
<p><span class="definition">file_remove($ufi,$disable_show_error = false)</span>
<br/>
Loads a file object by UFI and delete both the database record and the referenced file.
This function is create an empty File object and call <code>load($ufi,$disable_show_error)</code> method
then call the <code>remove()</code> on it.
</p>
<p><span class="definition">file_create_upload($name,$opts = [])</span>
<br/>
Manages after the form submitted part of a file upload procedure.
The <code>$name</code> parameter is the form item name of the <code>input type="file"</code> tag.
</p>
<ul><li>The function returns <code>NULL</code> if the upload is failed or a file UFI if success.</li><li>The <code>$opts</code> array can contains some options:
<ul><li><code>"container" => secure or public</code>
<ul><li>Determines if the file is public or secure</li></ul></li><li><code>"filetypes" => MIMETYPES_SEPARATED_BY_COMMA</code>
<ul><li>Restrict the upload for the specified mime types</li></ul></li><li><code>"subdir" => SUBDIRECTORY</code>
<ul><li>Specifies the upload subdirectory</li></ul></li></ul></li></ul><p>A simple file upload page callback:
</p><pre><code class="php">function upload_page()
{
    par_def('upl','text2ns');
    if(par_is('upl','Upload'))
    {
        form_source_check(); //Recommended to do this
        $n_ufi = file_create_upload('myfile',
            ['container' =&gt; 'secure','filetypes' =&gt; 'image/jpeg;image/png']);
        if($n_ufi == NULL)
            return 'The file upload is failed.';
        $f = file_load($n_ufi);
        return "The file is uploaded (With ufi:$n_ufi): &lt;img src=\"".$f-&gt;url."\"/&gt;";
    }

    $f = new HtmlForm('fupl');
    $f-&gt;action_post(current_loc());
    $f-&gt;upload('myfile','');
    $f-&gt;input('submit','upl','Upload');
    ob_start();
    print "Please browse the file to upload";
    print $f-&gt;get();
    return ob_get_clean();
}
</code></pre><p><span class="definition">register_image_sizeclass($name, $w, $h)</span>
<br/>
See the <a href="#sizeclasses">size class chapter</a> for details.
<a name="fileaccess"></a>
</p><a name="pos_7"><h2>File access control</h2></a>
<p>You can control the access of the files by implementing the <code>HOOK_file_access</code> <a href="hooks.html">hook</a>.
</p>
<p>The hook receives the following three parameters:
</p>
<ol><li><code>$file</code> The examined file object. The system queries the permissions for this file.</li><li><code>$op</code> The system queries the permission for this operation. Possible values are:
<ul><li><code>"create"</code></li><li><code>"delete"</code></li><li><code>"view"</code></li></ul></li><li><code>$account</code> Determine the permission of this account (user node)</li></ol><p> The hook have to return one value of these defines:
</p>
<ul><li><code>FILE_ACCESS_IGNORE</code> - Ignore the answer</li><li><code>FILE_ACCESS_ALLOW</code> - Allow the operation specified by parameters</li><li><code>FILE_ACCESS_DENY</code> - Deny the operation specified by parameters</li></ul><p>In case there is no <code>HOOK_file_access</code> in the system or received FILE_ACCESS_IGNORE value the system
will deny every request except the following default allowed:
</p>
<ol><li>Allows everything for admin users.</li><li>Allows new file creation for authenticated users.</li><li>Allows to view public files. (Pointless to disable it.)</li><li>Allows delete/view to the file owner/uploader.</li></ol><p><em>Note: The FILE_ACCESS_DENY is always stronger than FILE_ACCESS_ALLOW, if both received the result will FILE_ACCESS_DENY</em>
</p>
<p>Samples:
</p><pre><code class="code"> // Allow add/edit/delete for editors but allows view for everyone
 function hook_mymodule_file_access($file,$op,$account)
 {
    if($op == 'view')
        return FILE_ACCESS_ALLOW;
    if($acc-&gt;auth && $acc-&gt;role &gt;= ROLE_EDITOR)
        return FILE_ACCESS_ALLOW;
    return FILE_ACCESS_IGNORE;
 }
</code></pre><a name="pos_8"><h3>The file_access function</h3></a>
<p><span class="definition">file_access(File $file,$op,$account)</span>
<br/>
Calculate the permission of the operation on the secure file of the parameter passed account.
(It's call the <code>HOOK_file_access</code> in background.)
</p>
<ul><li><code>$file</code> Determine the permission on this file</li><li><code>$op</code> Determine the permission for this operation. Possible values are:
<ul><li><code>"create"</code></li><li><code>"delete"</code></li><li><code>"update"</code></li><li><code>"view"</code></li></ul></li><li><code>$account</code> Determine the permission of this account (user node)</li></ul><p> The return value of this function can be:
</p>
<ul><li><code>FILE_ACCESS_IGNORE</code></li><li><code>FILE_ACCESS_ALLOW</code></li><li><code>FILE_ACCESS_DENY</code></li></ul><p><a name="fhooktrick"></a>
</p><a name="pos_8"><h2>Tricks with file hooks</h2></a>
<p>This code changes both the display filename and the storing filename of the uploaded jpeg
files with the <code>HOOK_upload_filename_alter</code> hook:
</p><pre><code class="php">function hook_mymodule_upload_filename_alter($p)
{
    if($p-&gt;file_ref-&gt;type == 'secure' &&
       $p-&gt;file_ref-&gt;type == 'image/jpeg')
    {
        $nn = rand(1000, 9999);
        $p-&gt;file_ref-&gt;name = 'image' . $nn . '.jpg';
        $p-&gt;pp_ref['filename'] = time() . '_' . $nn;
    }
}
</code></pre><p>The following code re-sample all uploaded jpeg images to fit 350x350 size (while keep aspect ratio)
with the <code>HOOK_file_uploaded</code> hook:
</p><pre><code class="php">function hook_mymodule_file_uploaded($f)
{
    if($f-&gt;file_ref-&gt;mime == 'image/jpeg')
        image_resample($f-&gt;file_ref-&gt;path, $f-&gt;file_ref-&gt;path, 350, 350);
}
</code></pre><p><a name="sizeclasses"></a>
</p><a name="pos_9"><h2>Image size classes</h2></a>
<p>CodKep also can store images as file object. Often this images should be available in different size than the uploaded size.
For example if you do an image gallery the pictures should have an index image variant which has smaller size than the
original. The CodKep has a helper mechanism to easy handle this for png,jpeg and gif images. The system achieve
this function as lazy which means that the scaled versions is generated when they needed to show not in upload phase.
This behaviour enable to create/change size classes on the fly without affecting existing files.
</p>
<p><span class="definition">register_image_sizeclass($name, $w, $h)</span>
<br/>
Registers an image size class in CodKep. By calling this function you will register one (more) image size class
with name specified by <code>$name</code> parameter in size <code>$w</code> and <code>$h</code> which are the desired width and the height
of the class.
(The images always scaled as keeping aspect ratio, so the final sizes may differs from the values specified here. -
 It means that the scaled image will fit in the specified size but may differs.)
</p>
<p>After you define your size classes in the system, the you can tell the CodKep which file should have the size classes
to generate. The mechanism similar to <a href="#fileaccess">file access</a>.
You can use the <code>HOOK_file_image_sizeclass($fileobject,$sizeclass)</code> <a href="hooks.html">hook</a> to tell which file
has the specified size class available.
</p>
<p>The <code>HOOK_file_image_sizeclass</code> should one of this value:
</p>
<ul><li><code>FILE_ACCESS_IGNORE</code></li><li><code>FILE_ACCESS_ALLOW</code></li><li><code>FILE_ACCESS_DENY</code></li></ul><p>In case a size class is defined (by <code>register_image_sizeclass</code>) and the <code>HOOK_file_image_sizeclass</code> hook will
return <code>FILE_ACCESS_ALLOW</code> the codkep will generate a scaled version of the file:
</p>
<ul><li>In "secure" type:
<ul><li>The scaled images are stored in a size class named subdirectory under the directory of the original files.</li><li>The scaled images are generated in time when they accessed. The image serving function will check if a scaled version is available. If not the system will generate a scaled image and serve that.</li></ul></li><li>In "public" type:
<ul><li>The scaled images are stored in a size class named subdirectory under the directory of the original files.</li><li>The scaled images are generated when a scaled link is generated by <code>urlResized($sizeclass)</code> function. (Because all public files is referenced directly without the CodKep, this is the only way to generated this files as lazy)</li></ul></li></ul><p>You can use the scaled version of the image files by the file class method <code>urlResized($sizeclass)</code>.
Using example of size classes:
</p><pre><code class="php">function hook_mymodule_before_start()
{
    ...
    //We will register two size class here
    register_image_sizeclass('40x40',40,40);
    register_image_sizeclass('100x100',100,100);
}

function hook_mymodule_file_image_sizeclass($fileobject,$sizeclass)
{
    //We will allow the scaling only for image files stored in 'customerportraits' directory
    if($fileobject-&gt;subdir == 'customerportraits')
        return FILE_ACCESS_ALLOW;
    return FILE_ACCESS_DENY;
}

//We will use the scaled images in this page callback function
function show_user_list()
{
  ...
  foreach($customers as $customer)
  {
    ...
    $cifile = file_load($customer-&gt;portrait);
    print l('&lt;img src="' . $cifile-&gt;urlResized("100x100") . '"/&gt;',$cifile-&gt;url());
    ...
  }
  ...
}
</code></pre><p><em>Note 1: If the <code>urlResized($sizeclass)</code> method is called on a file which has size classes disabled</em>
<em>(One <code>HOOK_file_image_sizeclass</code> returns <code>FILE_ACCESS_DENY</code> on it) the original file url will returned.</em>
<em>It means that the CodKep won't do error handling if non available size class requested instead serve the original (unscaled) file.</em>
</p>
<p><em>Node 2: In case a file is removed by the <code>remove()</code> method the system will check every available size class of the file</em>
<em>(according to the <code>HOOK_file_image_sizeclass</code> hook) and remove all scaled version of the file if exists.</em>
</p>
<p><em>Note 3: The size classes are only works on files which are jpeg,png or gif files according to their mime type.</em>
<em>Other file types are ignored. (The <code>urlResized()</code> returns same as <code>url</code> property)</em>
<a name="filesettings"></a>
</p><a name="pos_10"><h2>Settings of the file module</h2></a>
<p>The file settings which can set <a href="modules.html#site_settings">in site settings</a>.
</p>
<p></p>
<table><thead>
<tr><th>name</th><th>default</th><th>description</th></tr></thead>
<tbody>
<tr><td><small> <code>$site_config->public_file_path</code> </small></td><td><small> "data"         </small></td><td>The location of public files in the filesystem on server. (The files can stored in subdirectories here.)</td></tr>
<tr><td><small> <code>$site_config->public_file_url</code> </small></td><td><small> "/data"        </small></td><td>The browser URL prefix of public files. (url location)</td></tr>
<tr><td><small> <code>$site_config->secure_file_path</code> </small></td><td><small> "data/secure"  </small></td><td>The location of secure files in the filesystem on server. (The files can stored in subdirectories here.)</td></tr>
<tr><td><small> <code>$site_config->secure_file_url</code> </small></td><td><small> "/data/secure" </small></td><td>The browser URL prefix of secure files. This is a callback function by default.</td></tr>
<tr><td><small> <code>$site_config->file_ufi_lastInsertId_name</code> </small></td><td><small> '' </small></td><td>You can specify your own sequence name which used to generate the keys of file table. The empty means autodetect.</td></tr></tbody></table><p><a name="filehooks"></a>
</p><a name="pos_11"><h2>Hooks</h2></a>
<p>The following <a href="hooks.html">hooks</a> can be implement to interact with file module.
</p>
<p><em>Note: Many of this hooks has an <code>$obj</code> parameter which is a container object holding references</em>
<em>to the object and other data structures which are modifiable by the hook.</em>
</p>
<table><thead>
<tr><th>Hook</th><th>Description</th></tr></thead>
<tbody>
<tr><td>HOOK_file_access($file,$op,$account)</td><td>Controls the access to a secured file. Read the <a href="#fileaccess">file access section</a> for details. <br/> The value of <code>$op</code> can be <code>view,create,delete</code></td></tr>
<tr><td>HOOK_file_denied($f,$user)</td><td>Runs before the user will redirect to access denied page. Possible to change the standard "not found" message.</td></tr>
<tr><td>HOOK_file_uploaded($obj)</td><td>Runs when a file is uploaded, stored in sql. You can see an example <a href="#fhooktrick">here</a>.</td></tr>
<tr><td>HOOK_upload_filename_alter($obj)</td><td>Runs when a file is uploaded and the local fs name is determined.  You can see an example <a href="#fhooktrick">here</a>.</td></tr>
<tr><td>HOOK_file_upload_in($obj)</td><td>Runs when a file is uploaded but not yet stored in sql.</td></tr>
<tr><td>HOOK_file_loaded($obj)</td><td>Runs when a file is loaded.</td></tr>
<tr><td>HOOK_file_will_delete($obj)</td><td>Runs before a file is removed.</td></tr>
<tr><td>HOOK_file_image_sizeclass($fileobject,$sizeclass)</td><td>Controls the available size classes of the specified file. See <a href="#sizeclasses">size classes</a> above.</td></tr></tbody></table></div><script>hljs.initHighlightingOnLoad();</script><div class="ccdocpanel"><ul class="docsidemenu no-print"><li><a href="start.html">CodKep introduction</a><ul class=" closed"><li><a href="start.html#pos_2">What is CodKep</a></li><li><a href="start.html#pos_3">The main chapters of this document</a></li><li><a href="start.html#pos_4">Author, License</a></li></ul></li><li><a href="modules.html">Installing, Modules</a><ul class=" closed"><li><a href="modules.html#pos_2">Installing codkep</a></li><li><a href="modules.html#pos_3">Directories</a></li><li><a href="modules.html#pos_4">Site settings, configuration</a></li><li><a href="modules.html#pos_5">Modules</a></li><li><a href="modules.html#pos_6">Modules located in more subdirectory</a></li><li><a href="modules.html#pos_7">After you create your own module...</a></li></ul></li><li><a href="routes.html">Routes</a><ul class=" closed"><li><a href="routes.html#pos_2">Add custom locations</a></li><li><a href="routes.html#pos_3">The route definition array</a></li><li><a href="routes.html#pos_4">Parameters in URL</a></li><li><a href="routes.html#pos_5">Caching routes</a></li><li><a href="routes.html#pos_6">Generating URLs</a></li><li><a href="routes.html#pos_7">Generating Links</a></li><li><a href="routes.html#pos_8">Redirections</a></li><li><a href="routes.html#pos_9">Tags</a></li><li><a href="routes.html#pos_10">Clean URLs</a></li><li><a href="routes.html#pos_11">Hooks related to routes</a></li></ul></li><li><a href="hooks.html">Hooks</a><ul class=" closed"><li><a href="hooks.html#pos_2">Implement hooks</a></li><li><a href="hooks.html#pos_3">Interaction of hooks</a></li><li><a href="hooks.html#pos_4">Hook sequence of a page load</a></li><li><a href="hooks.html#pos_5">Create hooks</a></li><li><a href="hooks.html#pos_6">Caching hooks</a></li><li><a href="hooks.html#pos_7">Change hook order</a></li><li><a href="hooks.html#pos_8">Debugging hooks</a></li><li><a href="hooks.html#pos_9">Hooks</a></li></ul></li><li><a href="parameters.html">Parameters</a><ul class=" closed"><li><a href="parameters.html#pos_2">Defining parameters</a></li><li><a href="parameters.html#pos_3">Defining in route definition array</a></li><li><a href="parameters.html#pos_4">Using parameters</a></li><li><a href="parameters.html#pos_5">Other parameter related functions</a></li><li><a href="parameters.html#pos_6">Security classes</a></li><li><a href="parameters.html#pos_7">Parameter handling relates settings</a></li><li><a href="parameters.html#pos_8">Hooks</a></li></ul></li><li><a href="structure.html">Themes</a><ul class=" closed"><li><a href="structure.html#pos_2">Functions unrelated to themes</a></li><li><a href="structure.html#pos_3">Using of themes</a></li><li><a href="structure.html#pos_4">Place your own content to a site area</a></li><li><a href="structure.html#pos_5">Settings of flex theme</a></li><li><a href="structure.html#pos_6">Create own themes</a></li><li><a href="structure.html#pos_7">Menu system</a></li><li><a href="structure.html#pos_8">Custom themes and menu generation</a></li><li><a href="structure.html#pos_9">Hooks</a></li></ul></li><li><a href="ajax.html">Ajax framework</a><ul class=" closed"><li><a href="ajax.html#pos_2">Start ajax requests</a></li><li><a href="ajax.html#pos_3">1. Place an user (click) triggered ajax link in html code</a></li><li><a href="ajax.html#pos_4">2. Set HTML form action to ajax</a></li><li><a href="ajax.html#pos_5">3. Place a delayed ajax call to the page</a></li><li><a href="ajax.html#pos_6">4. Fill page parts/block by simply call fill_through_ajax() function</a></li><li><a href="ajax.html#pos_7">The ajax handler</a></li><li><a href="ajax.html#pos_8">Ajax commands</a></li><li><a href="ajax.html#pos_9">A complex ajax example (Version 1 - standard)</a></li><li><a href="ajax.html#pos_10">A complex ajax example (Version 2 - autorouted)</a></li></ul></li><li><a href="sql.html">Sql</a><ul class=" closed"><li><a href="sql.html#pos_2">Sql database settings</a></li><li><a href="sql.html#pos_3">Connect and disconnect</a></li><li><a href="sql.html#pos_4">Execute SQL commands</a></li><li><a href="sql.html#pos_5">General database CRUD interface</a></li><li><a href="sql.html#pos_6">Methods of DatabaseQuery</a></li><li><a href="sql.html#pos_7">Methods of DatabaseCond</a></li><li><a href="sql.html#pos_8">Simple and easy database operations</a></li><li><a href="sql.html#pos_9">Sql transactions</a></li><li><a href="sql.html#pos_10">Error handling</a></li><li><a href="sql.html#pos_11">Schema editor</a></li><li><a href="sql.html#pos_12">Define sql schema requirements</a></li><li><a href="sql.html#pos_13">Hooks</a></li></ul></li><li><a href="files.html">Files</a><ul class=""><li><a href="files.html#pos_2">Storing type</a></li><li><a href="files.html#pos_3">File class</a></li><li><a href="files.html#pos_4">Fixed properties of the File object</a></li><li><a href="files.html#pos_5">Methods of File object</a></li><li><a href="files.html#pos_6">Helper functions of File class</a></li><li><a href="files.html#pos_7">File access control</a></li><li><a href="files.html#pos_8">Tricks with file hooks</a></li><li><a href="files.html#pos_9">Image size classes</a></li><li><a href="files.html#pos_10">Settings of the file module</a></li><li><a href="files.html#pos_11">Hooks</a></li></ul></li><li><a href="forms.html">Forms</a><ul class=" closed"><li><a href="forms.html#pos_2">Simple HTML form generation</a></li><li><a href="forms.html#pos_3">Form checker method</a></li><li><a href="forms.html#pos_4">The SpeedForm </a></li><li><a href="forms.html#pos_5">Methods of SpeedForm</a></li><li><a href="forms.html#pos_6">Data definition structure</a></li><li><a href="forms.html#pos_7">The structure : Top level attributes</a></li><li><a href="forms.html#pos_8">Field types</a></li><li><a href="forms.html#pos_9">Common field attributes</a></li><li><a href="forms.html#pos_10">Output format of SpeedForm</a></li><li><a href="forms.html#pos_11">Query and Add field types</a></li><li><a href="forms.html#pos_12">Data definition structure repository</a></li><li><a href="forms.html#pos_13">Helper functions</a></li><li><a href="forms.html#pos_14">Settings of the forms module</a></li><li><a href="forms.html#pos_15">Hooks</a></li></ul></li><li><a href="tablegen.html">Table generator</a><ul class=" closed"><li><a href="tablegen.html#pos_2">Html table generation</a></li><li><a href="tablegen.html#pos_3">Excel output generator</a></li><li><a href="tablegen.html#pos_4">Convert Excel XML tables to HTML tables</a></li></ul></li><li><a href="totable.html">Query formatter</a><ul class=" closed"><li><a href="totable.html#pos_2">Automatic output generator for sql queries</a></li><li><a href="totable.html#pos_3">Input of to_table()</a></li><li><a href="totable.html#pos_4">Output of to_table()</a></li><li><a href="totable.html#pos_5">Options affects the whole table</a></li><li><a href="totable.html#pos_6">Change the number or/and the order of the fields</a></li><li><a href="totable.html#pos_7">Customize of fields</a></li><li><a href="totable.html#pos_8">Modify the value of the fields</a></li><li><a href="totable.html#pos_9">Using virtual fields</a></li><li><a href="totable.html#pos_10">Using field repository</a></li><li><a href="totable.html#pos_11">Using field repository directly from SQL</a></li><li><a href="totable.html#pos_12">Backend of to_table()</a></li><li><a href="totable.html#pos_13">Generate HTML and Excel tables with same way</a></li></ul></li><li><a href="dyntable.html">DynTable</a><ul class=" closed"><li><a href="dyntable.html#pos_2">Methods of DynTable class</a></li><li><a href="dyntable.html#pos_3">Data definition structure</a></li><li><a href="dyntable.html#pos_4">Data definition structure repository</a></li><li><a href="dyntable.html#pos_5">A complex example</a></li></ul></li><li><a href="user.html">User module</a><ul class=" closed"><li><a href="user.html#pos_2">The global $user object</a></li><li><a href="user.html#pos_3">Login and logout</a></li><li><a href="user.html#pos_4">Managing users</a></li><li><a href="user.html#pos_5">Helper functions</a></li><li><a href="user.html#pos_6">CodKep session data</a></li><li><a href="user.html#pos_7">Settings of user module</a></li><li><a href="user.html#pos_8">Hooks</a></li></ul></li><li><a href="node.html">Node</a><ul class=" closed"><li><a href="node.html#pos_2">Fixed properties(fields) of the Node</a></li><li><a href="node.html#pos_3">Methods of Node class</a></li><li><a href="node.html#pos_4">Helper functions of node class</a></li><li><a href="node.html#pos_5">Defining a node</a></li><li><a href="node.html#pos_6">Dynamic node definition</a></li><li><a href="node.html#pos_7">Derive node definition from another node</a></li><li><a href="node.html#pos_8">Modify existing node types</a></li><li><a href="node.html#pos_9">Show the defined node types</a></li><li><a href="node.html#pos_10">Database appearance of nodes</a></li><li><a href="node.html#pos_11">Querying node lists from database</a></li><li><a href="node.html#pos_12">Node access control</a></li><li><a href="node.html#pos_13">REST api for nodes</a></li><li><a href="node.html#pos_14">Node related REST commands</a></li><li><a href="node.html#pos_15">A complete example</a></li><li><a href="node.html#pos_16">Custom Node objects</a></li><li><a href="node.html#pos_17">Settings of the nodes</a></li><li><a href="node.html#pos_18">Hooks</a></li></ul></li><li><a href="page.html">Page</a><ul class=" closed"><li><a href="page.html#pos_2">Fields of the page</a></li><li><a href="page.html#pos_3">Permissions of pages</a></li><li><a href="page.html#pos_4">Extending page type</a></li><li><a href="page.html#pos_5">Settings of the pages</a></li><li><a href="page.html#pos_6">Hooks</a></li></ul></li><li><a href="doc.html">Documenting</a><ul class=" closed"><li><a href="doc.html#pos_2">My mark language</a></li><li><a href="doc.html#pos_3">Highlights</a></li><li><a href="doc.html#pos_4">Headings</a></li><li><a href="doc.html#pos_5">Other elements</a></li><li><a href="doc.html#pos_6">Tables</a></li><li><a href="doc.html#pos_7">Lists</a></li><li><a href="doc.html#pos_8">Codes</a></li><li><a href="doc.html#pos_9">Links</a></li><li><a href="doc.html#pos_10">Images</a></li></ul></li><li><a href="debug.html">Debugging</a><ul class=" closed"><li><a href="debug.html#pos_2">Dumping arbitrary data objects</a></li><li><a href="debug.html#pos_3">Special pages</a></li><li><a href="debug.html#pos_4">Debug sql calls</a></li><li><a href="debug.html#pos_5">Dump the parameters of the page</a></li></ul></li><li><a href="cron.html">Cron module</a><ul class=" closed"><li><a href="cron.html#pos_2">Trigger the cron module to operate</a></li><li><a href="cron.html#pos_3">Defining a scheduled task</a></li><li><a href="cron.html#pos_4">Settings</a></li></ul></li><li><a href="permissionflags.html">PermissionFlags module</a><ul class=" closed"><li><a href="permissionflags.html#pos_2">Methods of File object</a></li></ul></li><li><a href="activitycomment.html">ActivityComment module</a><ul class=" closed"><li><a href="activitycomment.html#pos_2">ActivityComment API</a></li><li><a href="activitycomment.html#pos_3">Permissions of commenting</a></li><li><a href="activitycomment.html#pos_4">Sample code</a></li><li><a href="activitycomment.html#pos_5">Settings</a></li></ul></li><li><a href="activitypoll.html">ActivityPoll module</a><ul class=" closed"><li><a href="activitypoll.html#pos_2">ActivityPoll API</a></li><li><a href="activitypoll.html#pos_3">Permissions of poll vote</a></li><li><a href="activitypoll.html#pos_4">Sample code</a></li><li><a href="activitypoll.html#pos_5">Settings</a></li></ul></li><li><a href="httpsqlconn.html">HttpSqlConn module</a><ul class=" closed"><li><a href="httpsqlconn.html#pos_2">Steps of remote sql processing</a></li><li><a href="httpsqlconn.html#pos_3">Resource names</a></li><li><a href="httpsqlconn.html#pos_4">Access control</a></li></ul></li></ul></div></div>
</body>
</html>